# EARLY BUDDY (ì–¼ë¦¬ë²„ë””) iOS

### ì„œë¹„ìŠ¤ ì†Œê°œ

ì•½ì†ì‹œê°„ì„ ìœ„í•œ ë‚˜ë§Œì˜ ëŒ€ì¤‘êµí†µ ë°°ì°¨ ì•Œë¦¬ë¯¸ ì–¼ë¦¬ë²„ë”” ğŸ§ğŸ’

------

### Work-Flow

![workflow](./images/workflow.png)

------

### ê°œë°œí™˜ê²½ 

âœ”ï¸ Swift 5

âœ”ï¸ Xcode 11.3

### ì‚¬ìš©í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬

âœ”ï¸ Alamofire

âœ”ï¸ Hero

âœ”ï¸ Snapkit

------

### ì‹¤í–‰í™”ë©´

ğŸ§ í™ˆí™”ë©´ ğŸ§

<img src="./images/home1.png" width="30%" height="30%"></img>
<img src="./images/home2.png" width="30%" height="30%"></img>
<img src="./images/home3.png" width="30%" height="30%"></img>
<img src="./images/home4.png" width="30%" height="30%"></img>
<img src="./images/home5.png" width="30%" height="30%"></img>
<img src="./images/home6.png" width="30%" height="30%"></img>
<img src="./images/home7.png" width="30%" height="30%"></img>
<img src="./images/home8.png" width="30%" height="30%"></img>
<img src="./images/s1.png" width="30%" height="30%"></img>
<img src="./images/s2.png" width="30%" height="30%"></img>
<img src="./images/s3.png" width="30%" height="30%"></img>
<img src="./images/s4.png" width="30%" height="30%"></img>
<img src="./images/1.png" width="30%" height="30%"></img>
<img src="./images/2.png" width="30%" height="30%"></img>
<img src="./images/3.png" width="30%" height="30%"></img>
<img src="./images/4.png" width="30%" height="30%"></img>
<img src="./images/5.png" width="30%" height="30%"></img>
<img src="./images/6.png" width="30%" height="30%"></img>


ğŸ§ ì¼ì •ë“±ë¡ ğŸ§

------

### ê¸°ëŠ¥ì†Œê°œ

|       ê¸°ëŠ¥        | ìš°ì„ ìˆœìœ„ |          ê°œë°œì—¬ë¶€          |                    ë‹´ë‹¹                    |
| :---------------: | :------: | :------------------------: | :----------------------------------------: |
|     í‘¸ì‹œì•ŒëŒ      |  1ìˆœìœ„   | ê°œë°œì ê³„ì • ì—†ì–´ ì§„í–‰ ë¶ˆê°€ |                     -                      |
|        í™ˆ         |  1ìˆœìœ„   |  ë·° ì™„ì„±<br />í†µì‹  ì§„í–‰ì¤‘  |                    í˜„ì§€                    |
|     ì¼ì • ë“±ë¡     |  1ìˆœìœ„   |  ë·° ì™„ì„±<br />í†µì‹  ì§„í–‰ì¤‘  |                    í˜„ì§€                    |
|     ì£¼ì†Œ ê²€ìƒ‰     |  1ìˆœìœ„   |  ë·° ì™„ì„±<br />í†µì‹  ì§„í–‰ì¤‘  |                    í˜„ì§€                    |
|   ê²½ë¡œ ë³´ì—¬ì£¼ê¸°   |  1ìˆœìœ„   |  ë·° ì™„ì„±<br />í†µì‹  ì§„í–‰ì¤‘  |                    í˜„ì§€                    |
|    ì •ê±°ì¥ ìœ„ì¹˜    |  1ìˆœìœ„   |         ë·° ì§„í–‰ì¤‘          |                    í˜„ì§€                    |
|   ì¼ì • ìƒì„¸ë³´ê¸°   |  1ìˆœìœ„   |  ë·° ì™„ì„±<br />í†µì‹  ì§„í–‰ì¤‘  |                    í˜„ì§€                    |
|     ìµœì´ˆì‚¬ìš©      |  2ìˆœìœ„   |  ë·° ì™„ì„±<br />í†µì‹  ì§„í–‰ì¤‘  |                    ê²½ì„                     |
| ë¡œê·¸ì¸ / íšŒì›ê°€ì… |  2ìˆœìœ„   |  ë·° ì™„ì„±<br />í†µì‹  ì§„í–‰ì¤‘  |                    ê²½ì„                     |
|      ìº˜ë¦°ë”       |  2ìˆœìœ„   |         ë·° ì§„í–‰ì¤‘          | ë·° ê¸°ëŠ¥ - í˜„ì§€<br />ë¼ì´ë¸ŒëŸ¬ë¦¬ ìˆ˜ì • - íš¨ì§„ |
|    ë§ˆì´í˜ì´ì§€     |  3ìˆœìœ„   |         ë·° ì§„í–‰ì¤‘          |                    í˜„ì§€                    |

------

### ë¬¸ì œì ê³¼ í•´ê²°ë°©ë²•

ğŸ†˜ ê²½ë¡œ ë·°ë¥¼ ë™ì ìœ¼ë¡œ ì›€ì§ì´ëŠ” ê²ƒì— ì–´ë ¤ì›€ì„ ê²ªìŒ

âœ”ï¸ í…Œì´ë¸” ë·° ì•ˆì— ì»¬ë ‰ì…˜ ë·° ë„£ì–´ì„œ ì…€ì˜ widthë¥¼ ë™ì ìœ¼ë¡œ ê·¸ë¦¼

âœ”ï¸ í…Œì´ë¸” ë·°ì—ì„œ expandable íš¨ê³¼ë¥¼ ì ìš©í•´ ê²½ë¡œë¥¼ ê·¸ë¦¼

```swift
// ë·°ì— ë‚˜íƒ€ë‚˜ëŠ” ê²½ë¡œ ê³„ì‚°
func timeRate(dummySet: [Route]) -> [Double] {
        // view width 318
        var ratio = [Double]()
        dummySet.forEach {
            if $0.type != .none {
                ratio.append(Double(318/90) * Double($0.min!))
            } else {
                ratio.append(10.0)
            }
        }
        print("*****\(ratio)")
        return ratio
}

// í…Œì´ë¸” ë·° í”„ë¡œí† ì½œ ì •ì˜ (ë”ë¯¸ë°ì´í„°)
extension SelectPathViewController: UITableViewDelegate, UITableViewDataSource {
    
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return 3
    }
    
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        let cell = tableView.dequeueReusableCell(withIdentifier: "PathCell", for: indexPath) as! PathCell
        let path = paths[indexPath.row]
        
        cell.totalTimeLabel.text = path.totalTimeLabel
        cell.totalTransport.text = path.totalTransport
        cell.transferCount.text = path.transferCount
        cell.totalWalkTime.text = path.totalWalkTime
        cell.totalCost.text = path.totalCost
        cell.testSet = testSet
        cell.ratio = timeRate(dummySet: testSet)
        
        return cell
    }
    
    func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
        return 150
    }
}
```

ğŸ†˜ ë„¤ë¹„ê²Œì´ì…˜ ë°”ë¥¼ ì»¤ìŠ¤í…€í•˜ê³ , ë‹¤ë¥¸ ìŠ¤í† ë¦¬ë³´ë“œë¡œ ë„¤ë¹„ê²Œì´ì…˜ ì—°ê²°í•˜ëŠ” ê²ƒì— ì–´ë ¤ì›€ì„ ê²ªìŒ

âœ”ï¸ ë‹¤ë¥¸ ìŠ¤í† ë¦¬ë³´ë“œë¡œ ì—°ê²°í•  ë•Œ pushViewControllerë¥¼ ì‚¬ìš©í•´ì„œ ì—°ê²°í•˜ê³ , ì½”ë“œë¡œ ë„¤ë¹„ê²Œì´ì…˜ ë°”ë¥¼ ì»¤ìŠ¤í…€

```swift
override func viewWillAppear(_ animated: Bool) {
  ...
        addImageButton.addTarget(self, action: #selector(goToMine), for: .touchUpInside)
  ...
}

// ë‹¤ë¥¸ ìŠ¤í† ë¦¬ë³´ë“œë¡œ í™”ë©´ ì „í™˜
@objc func goToMine() {
                guard let nextVC = UIStoryboard(name: "Schedule", bundle: nil).instantiateViewController(withIdentifier: "MainScheduleViewController") as? MainScheduleViewController else { return }
        nextVC.modalPresentationStyle = .fullScreen
        self.navigationController?.pushViewController(nextVC, animated: true)
}

// ë„¤ë¹„ê²Œì´ì…˜ ë°” ì»¤ìŠ¤í…€ í•¨ìˆ˜
func customNavigationBar() {
        self.view.layer.backgroundColor = UIColor.white.cgColor
        self.navigationController?.setNavigationBarHidden(false, animated: true)
        self.title = "ì¥ì†Œ ì„ íƒ"
        self.navigationController?.navigationBar.titleTextAttributes = [.foregroundColor: UIColor.white, .font: UIFont(name: "NotoSansKR-Medium", size: 18)!, .kern: CGFloat(-0.9)]
        self.navigationController?.navigationBar.barTintColor = UIColor.mainblue
        self.navigationController?.navigationBar.shadowImage = UIImage()
        self.navigationController?.navigationBar.isTranslucent = false
        self.navigationController?.navigationBar.backIndicatorImage = UIImage(named: "ic_back")
        self.navigationController?.navigationBar.backIndicatorTransitionMaskImage = UIImage(named: "ic_back")
        self.navigationController?.navigationBar.topItem?.title = ""
        self.navigationController?.navigationBar.tintColor = UIColor.white
}
```

ğŸ†˜ dismissë˜ëŠ” íŒì—… ë·°ì—ì„œ ê¸°ì¡´ ë·°ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì— ì–´ë ¤ì›€ì„ ê²ªìŒ

âœ”ï¸ í”„ë¡œí† ì½œì„ ì •ì˜í•´ Delegate Pattern ì ìš©

```swift
// dismissë˜ëŠ” ë·° ì»¨íŠ¸ë¡¤ëŸ¬
protocol SendDataDelegate {
    func sendData(data: String)
}

class PreferPopUpViewController: UIViewController {
  var delegate: SendDataDelegate?
  
  @IBAction func confirmAction(_ sender: UIButton) {
        if !allCheckImg.isHidden {
            if let data = allLabel.titleLabel?.text {
                delegate?.sendData(data: data)
                dismiss(animated: true, completion: nil)
            }
        } else if !busCheckImg.isHidden {
            if let data = busLabel.titleLabel?.text {
                delegate?.sendData(data: data)
                dismiss(animated: true, completion: nil)
            }
        } else {
            if let data = subwayLabel.titleLabel?.text {
                delegate?.sendData(data: data)
                dismiss(animated: true, completion: nil)
            }
        }
    } 
}

// ê°’ì„ ì „ë‹¬ë°›ëŠ” ë·° ì»¨íŠ¸ë¡¤ëŸ¬

class SelectPathViewController: UIViewController, SendDataDelegate {
  // delegate í•¨ìˆ˜ ì •ì˜
  func sendData(data: String) {
        preferLabel.text = data
  }
```

ğŸ†˜ íŒì—… ì°½ì—ì„œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í™ˆìœ¼ë¡œ ë„¤ë¹„ê²Œì´ì…˜ pop ë˜ì–´ì•¼í•˜ëŠ” íš¨ê³¼ê°€ ìˆì—ˆëŠ”ë°, íŒì—… ë·°ì—ëŠ” navigation controllerê°€ ì—°ê²°ë˜ì–´ìˆì§€ ì•Šì•„ popì´ ì ìš©ë˜ì§€ ì•Šì•˜ìŒ

âœ”ï¸  onFinished(), onComplete() í•¨ìˆ˜ë¥¼ ì ìš©í•´ í•´ê²°

```swift
// íŒì—… ë·° ì»¨íŠ¸ë¡¤ëŸ¬
class PopUpViewController: UIViewController {
  var onFinished: (() -> Void)?
  var onComplete: (() -> Void)?
  
  override func viewDidLoad() {
      super.viewDidLoad()
      self.homeButton.addTarget(self, action: #selector(goToHome), for: .touchUpInside)
      self.checkButton.addTarget(self, action: #selector(goToDetail), for: .touchUpInside)
  }
  
  @objc func goToHome() {
        self.confirm = false
        self.dismiss(animated: true)
        onFinished?()
  }
  
  @objc func goToDetail() {
        self.confirm = true
        print("goToDetail \(confirm)")
        self.dismiss(animated: true)
        onComplete?()
  }
}

// íŒì—… ë·°ë¥¼ ë„ìš°ëŠ” ë·° ì»¨íŠ¸ë¡¤ëŸ¬
    @IBAction func showConfirmAction(_ sender: UIButton) {
      let storyboard = UIStoryboard(name: "Schedule", bundle: nil)
      let myAlert = storyboard.instantiateViewController(withIdentifier: "PopUpViewController") as! PopUpViewController
      myAlert.modalPresentationStyle = UIModalPresentationStyle.overCurrentContext
      myAlert.modalTransitionStyle = UIModalTransitionStyle.crossDissolve
      guard let nextVC = UIStoryboard(name: "Schedule", bundle: nil).instantiateViewController(identifier: "DetailScheduleViewController") as? DetailScheduleViewController else { return }
      nextVC.modalPresentationStyle = .fullScreen
        
      myAlert.onFinished = { [weak self] in
          self?.navigationController?.popViewController(animated: true)
      }
        
      myAlert.onComplete = { [weak self] in
          self?.navigationController?.pushViewController(nextVC, animated: true)
      }
        
      self.present(myAlert, animated: true, completion: nil)
    }
```

ğŸ†˜ í†µì‹  ì‹œ ì ‘ê·¼ì‹œê°„ ì´ˆê³¼ì˜ ì´ìŠˆê°€ ìˆì—ˆìŒ

âœ”ï¸  ëŒ€ì¤‘ì ì¸ ì´ìŠˆì§€ë§Œ, ì•„ì§ í•´ê²°ë²•ì„ ì°¾ì§€ ëª»í•¨
------
### ì–¼ë¦¬ë²„ë”” iOS ê°œë°œì 
ğŸ‘©ğŸ»â€ğŸ’» (ë¦¬ë“œ) [ê¹€í˜„ì§€](https://github.com/khyunjiee)</br>
 - SOPT 25ê¸° iOS íŒŒíŠ¸ YB ê¹€í˜„ì§€ì…ë‹ˆë‹¤ :)</br>
 - ì¢‹ì€ íŒ€ì›ë“¤ ë•ë¶„ì— í–‰ë³µí•œ ì•±ì¼ ì¤‘ì…ë‹ˆë‹¤ !!</br>
 ğŸ‘©ğŸ»â€ğŸ’» (ì„œí¬íŠ¸) [ë°•ê²½ì„ ](https://github.com/gngsn)</br>
 ğŸ‘©ğŸ»â€ğŸ’» [í™©íš¨ì§„](https://github.com/hwang-hyojin)</br>
 - SOPT 25ê¸° iOS íŒŒíŠ¸ YB í™©íš¨ì§„ì…ë‹ˆë‹¤!</br>
 - ê·€ì—¬ìš´ ì´ë¹„ ë³´ë©´ì„œ í˜ë‚´ëŠ” ì¤‘â¿ğŸ¦


